<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√¢n T√≠ch K·ªπ Thu·∫≠t VN100</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* --- EMBEDDED GUIDE MODAL CSS --- */
        .guide-modal-overlay {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .guide-modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        .guide-modal-container {
            background-color: #fff;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 16px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            border: 1px solid #e0e0e0;
        }

        .guide-modal-overlay.show .guide-modal-container {
            transform: scale(1);
        }

        /* Header */
        .guide-modal-header {
            background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%);
            padding: 20px 25px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .guide-modal-title {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .guide-close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .guide-close-btn:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        /* Content Body */
        .guide-modal-body {
            padding: 25px 35px;
            overflow-y: auto;
            color: #333;
            line-height: 1.6;
            font-size: 1.05rem;
        }

        .guide-modal-body h3 {
            color: #1976d2;
            margin-top: 0;
            font-size: 1.6rem;
            border-bottom: 2px solid #ff9800;
            display: inline-block;
            padding-bottom: 5px;
            margin-bottom: 5px;
        }

        .guide-subtitle {
            display: block;
            color: #666;
            font-style: italic;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .guide-section-title {
            background-color: #fff3e0;
            color: #e65100;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-top: 25px;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        /* Strategy Box */
        .guide-strategy-box {
            background: #f5f9fc;
            border: 1px solid #e1e8ed;
            border-radius: 12px;
            padding: 20px;
        }

        .guide-strategy-item {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
        }

        .guide-strategy-item:last-child {
            margin-bottom: 0;
        }

        .guide-tag {
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.85rem;
            margin-right: 15px;
            min-width: 60px;
            text-align: center;
        }

        .tag-buy {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }

        .tag-sell {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }

        /* Footer */
        .guide-modal-footer {
            padding: 15px 25px;
            background: #f8f9fa;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
        }

        .guide-back-btn {
            background-color: #607d8b;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .guide-back-btn:hover {
            background-color: #455a64;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Scrollbar */
        .guide-modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .guide-modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .guide-modal-body::-webkit-scrollbar-thumb {
            background: #bdbdbd;
            border-radius: 10px;
        }

        .guide-modal-body::-webkit-scrollbar-thumb:hover {
            background: #9e9e9e;
        }

        /* --- NEW STOCK SELECTOR CSS --- */
        .industry-group {
            margin-bottom: 20px;
        }

        .industry-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #555;
            font-weight: bold;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 8px;
        }

        .stock-btn {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 6px 4px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            color: #333;
        }

        .stock-btn:hover {
            border-color: #bbb;
            background: #fdfdfd;
        }

        .stock-btn.active {
            background: #e3f2fd;
            border-color: #1976d2;
            color: #0d47a1;
            font-weight: 700;
        }

        .exchange-select {
            padding: 5px 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-weight: bold;
            color: #0d47a1;
        }

        /* --- HISTORY BOARD CSS --- */
        .history-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }

        .history-table-container {
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 4px;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .history-table th,
        .history-table td {
            padding: 10px 15px;
            text-align: right;
            border-bottom: 1px solid #f0f0f0;
        }

        .history-table th {
            text-align: center;
            background: #f8f9fa;
            position: sticky;
            top: 0;
            z-index: 2;
            font-weight: 600;
            color: #555;
        }

        .history-table td:first-child {
            text-align: center;
            font-weight: 500;
            color: #444;
        }

        .history-row-today {
            background-color: #e8f5e9;
            font-weight: bold;
            animation: flash 1s ease-in-out;
        }

        @keyframes flash {
            0% {
                background-color: #c8e6c9;
            }

            100% {
                background-color: #e8f5e9;
            }
        }

        .trend-up {
            color: #2e7d32;
        }

        .trend-down {
            color: #d32f2f;
        }

        .trend-ref {
            color: #f57c00;
        }

        /* --- REAL-TIME INDICATORS CSS --- */
        .indicator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }

        .indicator-card {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #eee;
        }

        .ind-name {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .ind-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
        }

        .recommendation-box {
            grid-column: 1 / -1;
            background: #e3f2fd;
            border: 1px solid #90caf9;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .rec-label {
            font-weight: bold;
            color: #1565c0;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .rec-price {
            font-size: 1.2rem;
            font-weight: 800;
            color: #d84315;
        }

        /* --- ENHANCED RECOMMENDATION SECTION --- */
        .enhanced-rec-section {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            padding: 25px;
            border-radius: 16px;
            margin-top: 25px;
            color: white;
            box-shadow: 0 10px 30px rgba(26, 35, 126, 0.3);
        }

        .enhanced-rec-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .enhanced-rec-title {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .top-strategy-badge {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
        }

        .zones-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .zones-grid {
                grid-template-columns: 1fr;
            }
        }

        .zone-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .zone-card.buy-zone {
            border-left: 4px solid #4caf50;
        }

        .zone-card.sell-zone {
            border-left: 4px solid #f44336;
        }

        .zone-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .zone-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .zone-icon.buy {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
        }

        .zone-icon.sell {
            background: linear-gradient(135deg, #f44336, #c62828);
        }

        .zone-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .zone-price-main {
            font-size: 2rem;
            font-weight: 800;
            margin: 10px 0;
        }

        .zone-price-range {
            font-size: 0.9rem;
            opacity: 0.85;
            margin-bottom: 10px;
        }

        .zone-condition {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .zone-condition strong {
            color: #ffeb3b;
        }

        /* Action Plan */
        .action-plan-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .action-plan-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-steps {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        @media (max-width: 900px) {
            .action-steps {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .action-step {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s, background 0.2s;
        }

        .action-step:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #7c4dff, #651fff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin: 0 auto 10px;
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .step-detail {
            font-size: 0.85rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        /* Risk Reward Metrics */
        .metrics-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .metric-pill {
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .metric-pill.positive {
            border: 1px solid #4caf50;
        }

        .metric-pill.negative {
            border: 1px solid #f44336;
        }

        .metric-pill.neutral {
            border: 1px solid #ff9800;
        }

        /* News Panel */
        .news-section {
            background: white;
            border-radius: 12px;
            margin-top: 25px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .news-header {
            background: linear-gradient(135deg, #37474f, #263238);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .news-header h4 {
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .news-tabs {
            display: flex;
            gap: 10px;
        }

        .news-tab {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            padding: 6px 14px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.2s;
        }

        .news-tab.active {
            background: #ff9800;
        }

        .news-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.25);
        }

        .news-list {
            max-height: 350px;
            overflow-y: auto;
        }

        .news-item {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }

        .news-item:hover {
            background: #f8f9fa;
        }

        .news-item:last-child {
            border-bottom: none;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .news-source {
            font-size: 0.75rem;
            padding: 3px 10px;
            border-radius: 10px;
            font-weight: 600;
        }

        .news-source.vndirect {
            background: #e3f2fd;
            color: #1565c0;
        }

        .news-source.fireant {
            background: #fff3e0;
            color: #e65100;
        }

        .news-source.cafef {
            background: #fce4ec;
            color: #c2185b;
        }

        .news-date {
            font-size: 0.8rem;
            color: #888;
        }

        .news-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
            line-height: 1.4;
            margin-bottom: 5px;
        }

        .news-summary {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.5;
        }

        .news-loading {
            text-align: center;
            padding: 40px;
            color: #888;
        }

        .news-type-tag {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 8px;
            margin-left: 8px;
        }

        .news-type-tag.stock {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .news-type-tag.sector {
            background: #e3f2fd;
            color: #1565c0;
        }

        .news-type-tag.internal {
            background: #fff3e0;
            color: #e65100;
        }

        /* --- MARKET SCAN BUTTON & PROGRESS --- */
        .market-scan-btn {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .market-scan-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.5);
        }

        .market-scan-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .scan-progress-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .scan-progress-bar {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .scan-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border-radius: 6px;
            transition: width 0.3s;
            width: 0%;
        }

        .scan-progress-text {
            font-size: 0.9rem;
            color: #555;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Ph√¢n T√≠ch K·ªπ Thu·∫≠t VN100</h1>
            <p>Bi·ªÉu ƒë·ªì n·∫øn v√† c√°c ch·ªâ b√°o k·ªπ thu·∫≠t chuy√™n s√¢u.</p>
            <div class="nav-links" style="margin-top: 15px;">
                <a href="index.html" class="secondary-btn" style="text-decoration: none; margin-right: 10px;">Quay l·∫°i
                    Bi·ªÉu ƒë·ªì</a>
                <a href="company_detail.html" class="secondary-btn" style="text-decoration: none;">Tra c·ª©u Doanh
                    nghi·ªáp</a>
            </div>
        </header>

        <div class="container" style="margin-top: 20px;">
            <div class="controls" style="flex-wrap: wrap; justify-content: center; gap: 20px;">

                <!-- SECTOR DASHBOARD -->


                <!-- MARKET SCAN SECTION -->
                <div id="market-scan-section"
                    style="background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%); padding: 30px; border-radius: 16px; margin-bottom: 30px; text-align: center; color: white; flex: 1; min-width: 350px; max-width: 500px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 1.5rem;">üéØ S√ÄNG L·ªåC C·ªî PHI·∫æU T·ª∞ ƒê·ªòNG</h2>
                    <p style="margin: 0 0 20px 0; opacity: 0.9;">Qu√©t to√†n b·ªô ~130 m√£ c·ªï phi·∫øu, ph√¢n t√≠ch 8 chi·∫øn l∆∞·ª£c,
                        x·∫øp h·∫°ng theo Win Rate</p>
                    <button id="market-scan-btn" class="market-scan-btn" onclick="startMarketScan()">
                        üöÄ Ch·ªçn M√£ C·ªï Phi·∫øu ƒê·ªÉ ƒê·∫ßu T∆∞
                    </button>
                </div>

                <!-- SCAN PROGRESS (hidden initially) -->
                <div id="scan-progress-container" class="scan-progress-container" style="display: none; width: 100%;">
                    <h4 style="margin: 0 0 15px 0; color: #333;">üì° ƒêang qu√©t th·ªã tr∆∞·ªùng...</h4>
                    <div class="scan-progress-bar">
                        <div id="scan-progress-fill" class="scan-progress-fill"></div>
                    </div>
                    <div class="scan-progress-text">
                        <span id="scan-progress-status">ƒêang chu·∫©n b·ªã...</span>
                        <span id="scan-progress-percent">0%</span>
                    </div>
                </div>

                <!-- MARKET SCAN RESULTS (hidden initially) -->
                <div id="market-scan-results" style="display: none; width: 100%;"></div>

                <!-- DATE & CONTROLS -->
                <div id="analysis-controls"
                    style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 30px; border: 1px solid #e0e0e0; flex: 1; min-width: 350px; max-width: 500px;">
                    <h3
                        style="margin-top:0; color:#2c3e50; font-size:1.1em; border-bottom:1px solid #eee; padding-bottom:10px;">
                        Thi·∫øt L·∫≠p Ph√¢n T√≠ch (ƒê∆°n l·∫ª)</h3>

                    <div style="margin-bottom: 20px;">
                        <label for="analysis-stock-input"
                            style="font-weight: bold; display: block; margin-bottom: 5px;">M√£ C·ªï Phi·∫øu (Click ƒë·ªÉ ch·ªçn t·ª´
                            danh s√°ch):</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="analysis-stock-input" placeholder="Nh·∫≠p m√£ ho·∫∑c click ƒë·ªÉ ch·ªçn..."
                                style="padding: 8px 12px; width: 100%; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;"
                                onclick="openSectorModal()" autocomplete="off">
                        </div>
                    </div>

                    <!-- Sector Selection Modal (Dynamic) -->
                    <div id="sector-modal" class="modal hidden">
                        <div class="modal-content">
                            <div class="modal-header"
                                style="display:flex; justify-content:space-between; align-items:center;">
                                <div style="display:flex; align-items:center; gap:15px;">
                                    <h3 style="margin:0;">Ch·ªçn C·ªï Phi·∫øu</h3>
                                    <select id="modal-exchange-select" class="exchange-select"
                                        onchange="renderSectorModal()">
                                        <option value="HOSE">HOSE (HSX)</option>
                                        <option value="UPCOM">UPCOM</option>
                                    </select>
                                </div>
                                <span class="close-modal" onclick="closeSectorModal()">&times;</span>
                            </div>
                            <div class="modal-body" id="sector-list-container">
                                <!-- Dynamic Content Will Be Injected Here -->
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap;" id="quick-date-buttons">
                        <button class="quick-date-btn" data-weeks="1" title="1 Tu·∫ßn"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">1
                            Tu·∫ßn</button>
                        <button class="quick-date-btn" data-weeks="2" title="2 Tu·∫ßn"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">2
                            Tu·∫ßn</button>
                        <button class="quick-date-btn" data-months="1" title="1 Th√°ng"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">1
                            Th√°ng</button>
                        <button class="quick-date-btn" data-months="2" title="2 Th√°ng"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">2
                            Th√°ng</button>
                        <button class="quick-date-btn" data-years="1" title="1 NƒÉm"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">1
                            NƒÉm</button>
                        <button class="quick-date-btn" data-years="2" title="2 NƒÉm"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">2
                            NƒÉm</button>
                        <button class="quick-date-btn" data-years="3" title="3 NƒÉm"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">3
                            NƒÉm</button>
                        <button class="quick-date-btn" data-years="4" title="4 NƒÉm"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">4
                            NƒÉm</button>
                        <button class="quick-date-btn" data-years="5" title="5 NƒÉm"
                            style="padding: 6px 12px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 20px; cursor: pointer; font-size:0.9em; transition:all 0.2s;">5
                            NƒÉm</button>

                    </div>

                    <div style="display: flex; gap: 20px; align-items: flex-end; flex-wrap:wrap;">
                        <div class="control-group">
                            <label for="analysis-start-date"
                                style="font-size:0.9em; display:block; margin-bottom:5px;">T·ª´ ng√†y:</label>
                            <input type="date" id="analysis-start-date"
                                style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                        </div>
                        <div class="control-group">
                            <label for="analysis-end-date"
                                style="font-size:0.9em; display:block; margin-bottom:5px;">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="analysis-end-date"
                                style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                        </div>
                        <button id="analyze-btn" class="primary-btn"
                            style="height: 38px; min-width: 150px; background-color: #007bff; border:none; border-radius:4px; color:white; font-weight:bold; cursor:pointer;">
                            üîç Ph√¢n t√≠ch Ngay
                        </button>
                    </div>
                </div>

                <!-- PROGRESS BAR -->


            </div>
        </div>
    </div>

    <!-- REAL-TIME HISTORY BOARD -->
    <div class="container" id="price-history-section" style="display: none;">
        <div class="history-section">
            <h3
                style="margin-top: 0; color: #2c3e50; font-size: 1.1em; border-bottom: 1px solid #eee; padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
                <span>üìä L·ªãch S·ª≠ Gi√° & Bi·∫øn ƒê·ªông (Real-time)</span>
                <span id="history-last-update" style="font-size: 0.8rem; font-weight: normal; color: #777;"></span>
            </h3>
            <div class="history-table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Ng√†y</th>
                            <th>M·ªü c·ª≠a</th>
                            <th>Cao nh·∫•t</th>
                            <th>Th·∫•p nh·∫•t</th>
                            <th>ƒê√≥ng c·ª≠a</th>
                            <th>Thay ƒë·ªïi</th>
                            <th>Kh·ªëi l∆∞·ª£ng</th>
                        </tr>
                    </thead>
                    <tbody id="history-table-body">
                        <!-- Data rows injected by JS -->
                    </tbody>
                </table>
            </div>
            <div style="margin-top: 10px; text-align: center; font-size: 0.85rem; color: #888; font-style: italic;">
                * D·ªØ li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t t·ª± ƒë·ªông trong phi√™n giao d·ªãch.
            </div>

            <!-- New Indicators Section -->
            <div id="realtime-indicators" class="indicator-grid">
                <!-- Injected via JS -->
            </div>
            <div id="buy-recommendation" class="recommendation-box" style="display:none;">
                <div class="rec-label">üéØ Khuy·∫øn Ngh·ªã Mua (H·ªó tr·ª£ m·∫°nh):</div>
                <div id="rec-price-value" class="rec-price">--</div>
            </div>

            <!-- ENHANCED RECOMMENDATION SECTION -->
            <div id="enhanced-recommendation-section" class="enhanced-rec-section" style="display: none;">
                <!-- Header with Top Strategy -->
                <div class="enhanced-rec-header">
                    <div class="enhanced-rec-title">
                        üìä Chi Ti·∫øt Khuy·∫øn Ngh·ªã Giao D·ªãch
                    </div>
                    <div id="top-strategy-badge" class="top-strategy-badge">
                        üèÜ <span id="top-strategy-name">--</span>
                        <span id="top-strategy-winrate" style="opacity:0.9;">--% Win</span>
                    </div>
                </div>

                <!-- Buy & Sell Zones Grid -->
                <div class="zones-grid">
                    <!-- Buy Zone -->
                    <div class="zone-card buy-zone">
                        <div class="zone-header">
                            <div class="zone-icon buy">üìà</div>
                            <div class="zone-title">V√ôNG MUA TI·ªÄM NƒÇNG</div>
                        </div>
                        <div class="zone-price-main" id="buy-zone-price">--</div>
                        <div class="zone-price-range" id="buy-zone-range">V√πng an to√†n: -- ƒë·∫øn --</div>
                        <div class="zone-condition" id="buy-zone-condition">
                            <strong>ƒêi·ªÅu ki·ªán:</strong> <span>--</span>
                        </div>
                    </div>

                    <!-- Sell Zone -->
                    <div class="zone-card sell-zone">
                        <div class="zone-header">
                            <div class="zone-icon sell">üìâ</div>
                            <div class="zone-title">V√ôNG B√ÅN / CH·ªêT L·ªúI</div>
                        </div>
                        <div class="zone-price-main" id="sell-zone-price">--</div>
                        <div class="zone-price-range" id="sell-zone-range">
                            <span style="color:#4caf50;">Take Profit: --</span> |
                            <span style="color:#f44336;">Stop Loss: --</span>
                        </div>
                        <div class="zone-condition" id="sell-zone-condition">
                            <strong>ƒêi·ªÅu ki·ªán:</strong> <span>--</span>
                        </div>
                    </div>
                </div>

                <!-- Metrics Row -->
                <div class="metrics-row" id="metrics-row">
                    <div class="metric-pill positive">
                        <span>üìä</span> Win Rate: <strong id="metric-winrate">--</strong>
                    </div>
                    <div class="metric-pill neutral">
                        <span>üí∞</span> L·ª£i nhu·∫≠n TB: <strong id="metric-avg-return">--</strong>
                    </div>
                    <div class="metric-pill positive">
                        <span>üéØ</span> Risk/Reward: <strong id="metric-risk-reward">--</strong>
                    </div>
                    <div class="metric-pill neutral">
                        <span>üìà</span> S·ªë l·ªánh: <strong id="metric-trades">--</strong>
                    </div>
                    <div class="metric-pill positive"
                        style="border: 1px solid #2196f3; background: rgba(33, 150, 243, 0.15);">
                        <span>üìÖ</span> Th√°ng T·ªët Nh·∫•t: <strong id="metric-best-month">--</strong>
                    </div>
                </div>

                <!-- Action Plan Section -->
                <div class="action-plan-section">
                    <div class="action-plan-title">
                        üìã K·∫æ HO·∫†CH H√ÄNH ƒê·ªòNG CHI TI·∫æT
                    </div>
                    <div class="action-steps" id="action-steps">
                        <div class="action-step">
                            <div class="step-number">1</div>
                            <div class="step-title">ƒêi·ªÅu Ki·ªán V√†o L·ªánh</div>
                            <div class="step-detail" id="step-1-detail">Ch·ªù t√≠n hi·ªáu x√°c nh·∫≠n...</div>
                        </div>
                        <div class="action-step">
                            <div class="step-number">2</div>
                            <div class="step-title">Kh·ªëi L∆∞·ª£ng ƒê·ªÅ Xu·∫•t</div>
                            <div class="step-detail" id="step-2-detail">Chia l√†m 2-3 ƒë·ª£t mua...</div>
                        </div>
                        <div class="action-step">
                            <div class="step-number">3</div>
                            <div class="step-title">ƒêi·ªÉm Ch·ªët L·ªùi</div>
                            <div class="step-detail" id="step-3-detail">Khi ƒë·∫°t m·ª•c ti√™u...</div>
                        </div>
                        <div class="action-step">
                            <div class="step-number">4</div>
                            <div class="step-title">ƒêi·ªÉm C·∫Øt L·ªó</div>
                            <div class="step-detail" id="step-4-detail">N·∫øu gi√° ph√° v·ª°...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEWS SECTION -->
            <div id="stock-news-section" class="news-section" style="display: none;">
                <div class="news-header">
                    <h4>üì∞ Tin T·ª©c & Th√¥ng Tin C·ªï Phi·∫øu <span id="news-stock-symbol"></span></h4>
                    <div class="news-tabs">
                        <button class="news-tab active" data-type="all" onclick="filterNews('all')">T·∫•t c·∫£</button>
                        <button class="news-tab" data-type="stock" onclick="filterNews('stock')">C·ªï phi·∫øu</button>
                        <button class="news-tab" data-type="sector" onclick="filterNews('sector')">Ng√†nh</button>
                        <button class="news-tab" data-type="internal" onclick="filterNews('internal')">N·ªôi b·ªô</button>
                    </div>
                </div>
                <div class="news-list" id="news-list">
                    <div class="news-loading">
                        ‚è≥ ƒêang t·∫£i tin t·ª©c...
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- FULL WIDTH CHART SECTION -->
    <div class="full-width-chart-wrapper">
        <div class="indicator-panel"
            style="max-width: 1000px; margin: 0 auto 20px auto; background: #333; color: white; padding: 15px; border-radius: 8px;">
            <h4 style="border-bottom: 1px solid #555; padding-bottom: 10px;">C√°c ch·ªâ b√°o k·ªπ thu·∫≠t (B·∫≠t/T·∫Øt)</h4>
            <div class="toggles" style="display: flex; flex-wrap: wrap; gap: 15px;">
                <label><input type="checkbox" class="indicator-toggle" data-indicator="sma"> Moving Average
                    (SMA)</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="ema"> Exponential MA
                    (EMA)</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="bollinger"> Bollinger
                    Bands</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="ichimoku"> Ichimoku
                    Cloud</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="fibonacci"> Fibonacci
                    Retracement</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="rsi" checked> RSI</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="macd"> MACD</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="stochastic">
                    Stochastic</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="adx"> ADX</label>
                <label><input type="checkbox" class="indicator-toggle" data-indicator="stddev"> Standard
                    Deviation</label>
            </div>
        </div>

        <div class="chart-section" id="chart-area-container">
            <div id="main-chart-area" style="min-height: 550px;"></div>
            <div id="indicator-charts-container"></div>
        </div>
    </div>

    <!-- GUIDE SECTION MOVED HERE -->
    <div class="container" style="margin-top: 20px;">
        <div
            style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e9ecef;">
            <h3 style="margin-top: 0; color: #495057;">H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng Ch·ªâ B√°o & Chi·∫øn L∆∞·ª£c</h3>
            <p style="color: #6c757d; font-style: italic; margin-bottom: 15px;">B·∫•m v√†o ch·ªâ b√°o ƒë·ªÉ xem h∆∞·ªõng d·∫´n chi
                ti·∫øt c√°ch giao d·ªãch.</p>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="guide-btn" onclick="openGuide('RSI')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">RSI</button>
                <button class="guide-btn" onclick="openGuide('MACD')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">MACD</button>
                <button class="guide-btn" onclick="openGuide('Bollinger')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">Bollinger
                    Bands</button>
                <button class="guide-btn" onclick="openGuide('SMA')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">SMA</button>
                <button class="guide-btn" onclick="openGuide('Ichimoku')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">Ichimoku</button>
                <button class="guide-btn" onclick="openGuide('Stochastic')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">Stochastic</button>
                <button class="guide-btn" onclick="openGuide('ADX')"
                    style="padding: 8px 15px; border: 1px solid #ced4da; border-radius: 20px; background: white; cursor: pointer;">ADX</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="container" style="margin-top: 20px;">
            <div class="controls" style="flex-wrap: wrap;">
                <div class="backtest-section"
                    style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; width: 100%;">
                    <h2>Ki·ªÉm th·ª≠ Chi·∫øn l∆∞·ª£c (Backtest) So S√°nh</h2>

                    <div class="controls" style="align-items: center; gap: 20px;">
                        <div style="flex: 1; font-size: 0.9em; color: #555;">
                            H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ch·∫°y t·∫•t c·∫£ c√°c ch·ªâ b√°o th√¥ng d·ª•ng (RSI, MACD, Bollinger, SMA,
                            Ichimoku,
                            ADX) v√† so s√°nh hi·ªáu su·∫•t tr√™n nhi·ªÅu khung th·ªùi gian.
                        </div>
                        <button id="run-backtest-btn" class="primary-btn"
                            style="background: #28a745; height: 38px; min-width: 200px;">
                            Ph√¢n T√≠ch & So S√°nh T·∫•t C·∫£
                        </button>
                    </div>

                    <!-- Summary Highlights (Top 3) -->
                    <div id="bt-summary-container" style="margin-top: 30px; display: none;">
                        <h3 style="color: #333; margin-bottom: 15px;">üèÜ Top Chi·∫øn L∆∞·ª£c Hi·ªáu Qu·∫£ Nh·∫•t (Win Rate)
                        </h3>
                        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                            <div id="bt-summary-short"
                                style="flex: 1; min-width: 300px; background: #e3f2fd; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <h4 style="margin-top: 0; color: #1976d2;">Ng·∫Øn H·∫°n (Short-term)</h4>
                                <div class="content"></div>
                            </div>
                            <div id="bt-summary-long"
                                style="flex: 1; min-width: 300px; background: #fff3e0; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <h4 style="margin-top: 0; color: #f57c00;">D√†i H·∫°n (Long-term)</h4>
                                <div class="content"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary Highlights (Top 3 Profit) -->
                    <div id="bt-profit-summary-container" style="margin-top: 30px; display: none;">
                        <h3 style="color: #333; margin-bottom: 15px;">üí∞ Top Chi·∫øn L∆∞·ª£c L·ª£i Nhu·∫≠n Cao Nh·∫•t</h3>
                        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                            <div id="bt-profit-summary-short"
                                style="flex: 1; min-width: 300px; background: #e3f2fd; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <h4 style="margin-top: 0; color: #1976d2;">Ng·∫Øn H·∫°n (Short-term)</h4>
                                <div class="content"></div>
                            </div>
                            <div id="bt-profit-summary-long"
                                style="flex: 1; min-width: 300px; background: #fff3e0; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <h4 style="margin-top: 0; color: #f57c00;">D√†i H·∫°n (Long-term)</h4>
                                <div class="content"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Toggle Full Results -->
                    <div id="bt-toggle-container" style="margin-top: 20px; text-align: center; display: none;">
                        <button id="bt-toggle-btn"
                            style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 0.9em;">
                            ‚¨áÔ∏è Xem T·∫•t C·∫£ K·∫øt Qu·∫£ Chi Ti·∫øt (B·∫£ng ƒê·∫ßy ƒê·ªß)
                        </button>
                        <div style="margin-top:5px; font-size:0.8em; color:#777;">* Nh·∫•n v√†o ƒë√¢y ƒë·ªÉ xem chi ti·∫øt
                            t·ª´ng
                            m·ªëc
                            th·ªùi gian</div>
                    </div>

                    <!-- Dynamic Results Container -->
                    <div id="bt-comparison-container" style="margin-top: 20px; display: none;"></div>


                    <!-- Detailed Log -->
                    <h3 id="bt-detail-title" style="display:none; margin-top: 30px;">Chi ti·∫øt Giao d·ªãch</h3>

                    <div id="bt-detail-container" style="display:none;">
                        <!-- Stats Dashboard -->
                        <div id="bt-stats-dashboard"
                            style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; background: #fff; padding: 15px; border: 1px solid #ddd; border-radius: 8px;">
                            <div style="flex: 1; min-width: 250px;">
                                <div id="bt-detail-pie-chart" style="min-height: 250px;"></div>
                            </div>
                            <div
                                style="flex: 1; display: flex; flex-direction: column; justify-content: center; min-width: 250px;">
                                <div class="stat-card"
                                    style="margin-bottom: 15px; padding: 15px; background: #e8f5e9; border-radius: 4px; border-left: 5px solid green;">
                                    <div style="font-size: 0.9rem; color: #555;">L·ªánh L·ªùi Cao Nh·∫•t</div>
                                    <span id="bt-max-win"
                                        style="color: green; font-size: 1.2rem; font-weight: bold;">--</span>
                                </div>
                                <div class="stat-card"
                                    style="margin-bottom: 15px; padding: 15px; background: #ffebee; border-radius: 4px; border-left: 5px solid red;">
                                    <div style="font-size: 0.9rem; color: #555;">L·ªánh L·ªó L·ªõn Nh·∫•t</div>
                                    <span id="bt-max-loss"
                                        style="color: red; font-size: 1.2rem; font-weight: bold;">--</span>
                                </div>
                                <div class="stat-card"
                                    style="padding: 15px; background: #e3f2fd; border-radius: 4px; border-left: 5px solid blue;">
                                    <div style="font-size: 0.9rem; color: #555;">T·ªïng L·ªánh L·ªùi / L·ªó</div>
                                    <span id="bt-win-loss-count" style="font-size: 1.2rem; font-weight: bold;">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- New 12-Month Stacked Bar Chart -->
                        <div id="bt-month-stacked-chart" style="margin-bottom: 20px; min-height: 300px;"></div>


                        <div style="max-height: 400px; overflow-y: auto; border: 1px solid #ddd;">
                            <table class="bt-table" style="width: 100%; border-collapse: collapse;">
                                <thead style="position: sticky; top: 0; background: #eee; z-index: 1;">
                                    <tr>
                                        <th>Th√°ng</th>
                                        <th>Ng√†y Mua</th>
                                        <th>Gi√° Mua</th>
                                        <th>Ng√†y B√°n</th>
                                        <th>Gi√° B√°n</th>
                                        <th>Gi·ªØ (Ng√†y)</th>
                                        <th>L·ª£i Nhu·∫≠n %</th>
                                    </tr>
                                </thead>
                                <tbody id="bt-detail-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- RESTRUCTURED GUIDE MODAL (Embedded) -->
    <div id="guide-modal-overlay" class="guide-modal-overlay">
        <div class="guide-modal-container">
            <div class="guide-modal-header">
                <h2 class="guide-modal-title">H∆∞·ªõng D·∫´n Giao D·ªãch</h2>
                <button class="guide-close-btn" onclick="closeGuideModal()">&times;</button>
            </div>

            <div id="guide-modal-body" class="guide-modal-body">
                <!-- Content Injected Here -->
            </div>

            <div class="guide-modal-footer">
                <button class="guide-back-btn" onclick="closeGuideModal()">
                    ‚¨ÖÔ∏è Quay l·∫°i
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="stock_list.js"></script>
    <script src="indicators.js"></script>
    <script src="backtest.js"></script>
    <script src="app.js"></script>
    <script src="script.js"></script>
    <script>
        // --- EMBEDDED GUIDE LOGIC ---
        const GUIDE_DATA = {
            'RSI': `
                <h3>Ch·ªâ b√°o RSI (Relative Strength Index)</h3>
                <span class="guide-subtitle">Ch·ªâ s·ªë S·ª©c m·∫°nh T∆∞∆°ng ƒë·ªëi - T√°c gi·∫£: J. Welles Wilder</span>
                
                <div class="guide-section-title">1. Kh√°i ni·ªám c·ªët l√µi</div>
                <p>RSI l√† m·ªôt ch·ªâ b√°o ƒë·ªông l∆∞·ª£ng (momentum oscillator) ƒëo l∆∞·ªùng t·ªëc ƒë·ªô v√† m·ª©c ƒë·ªô thay ƒë·ªïi c·ªßa chuy·ªÉn ƒë·ªông gi√°. RSI dao ƒë·ªông trong bi√™n ƒë·ªô t·ª´ 0 ƒë·∫øn 100. M·ª•c ƒë√≠ch ch√≠nh c·ªßa RSI l√† gi√∫p nh√† ƒë·∫ßu t∆∞ x√°c ƒë·ªãnh xem t√†i s·∫£n ƒëang ·ªü trong t√¨nh tr·∫°ng <strong>Qu√° Mua (Overbought)</strong> hay <strong>Qu√° B√°n (Oversold)</strong>.</p>
                <p>Theo m·∫∑c ƒë·ªãnh, RSI th∆∞·ªùng s·ª≠ d·ª•ng chu k·ª≥ 14 phi√™n. Gi√° tr·ªã RSI c√†ng cao th·ªÉ hi·ªán l·ª±c mua ƒëang r·∫•t m·∫°nh (nh∆∞ng c√≥ nguy c∆° ƒëi·ªÅu ch·ªânh), v√† ng∆∞·ª£c l·∫°i.</p>

                <div class="guide-section-title">2. C√°c ng∆∞·ª°ng quan tr·ªçng</div>
                <ul>
                    <li><strong>V√πng Qu√° Mua (Tr√™n 70):</strong> Khi RSI v∆∞·ª£t l√™n tr√™n 70, th·ªã tr∆∞·ªùng ƒë∆∞·ª£c coi l√† ƒëang h∆∞ng ph·∫•n qu√° m·ª©c. Gi√° c√≥ th·ªÉ ƒë√£ tƒÉng qu√° nhanh v√† c√≥ kh·∫£ nƒÉng cao s·∫Ω ƒë·∫£o chi·ªÅu gi·∫£m ho·∫∑c ƒëi ngang ƒë·ªÉ ƒëi·ªÅu ch·ªânh.</li>
                    <li><strong>V√πng Qu√° B√°n (D∆∞·ªõi 30):</strong> Khi RSI gi·∫£m xu·ªëng d∆∞·ªõi 30, th·ªã tr∆∞·ªùng ƒëang b·ªã b√°n th√°o qu√° m·ª©c. √Åp l·ª±c b√°n c√≥ th·ªÉ ƒë√£ c·∫°n ki·ªát v√† gi√° c√≥ kh·∫£ nƒÉng b·∫≠t tƒÉng tr·ªü l·∫°i.</li>
                    <li><strong>Ng∆∞·ª°ng 50:</strong> ƒê√≥ng vai tr√≤ l√† ranh gi·ªõi xu h∆∞·ªõng. RSI > 50 th∆∞·ªùng ·ªßng h·ªô xu h∆∞·ªõng tƒÉng, RSI < 50 ·ªßng h·ªô xu h∆∞·ªõng gi·∫£m.</li>
                </ul>
                
                <div class="guide-section-title">3. Chi·∫øn l∆∞·ª£c Giao d·ªãch Chi ti·∫øt</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA (LONG)</span>
                        <div>
                            <strong>Chi·∫øn l∆∞·ª£c H·ªìi quy (Mean Reversion):</strong>
                            <br>Ch·ªù ƒë·ª£i RSI gi·∫£m xu·ªëng d∆∞·ªõi v√πng 30 (v√≠ d·ª• 25). Sau ƒë√≥, ƒë·∫∑t l·ªánh MUA khi RSI <strong>c·∫Øt ng∆∞·ª£c l√™n tr√™n m·ªëc 30</strong>. ƒêi·ªÅu n√†y x√°c nh·∫≠n ƒë√°y t·∫°m th·ªùi ƒë√£ ƒë∆∞·ª£c thi·∫øt l·∫≠p.
                            <br><em>V√≠ d·ª•: C·ªï phi·∫øu VNM gi·∫£m m·∫°nh, RSI v·ªÅ 22. Hai phi√™n sau RSI tƒÉng l√™n 31 => T√≠n hi·ªáu Mua.</em>
                        </div>
                    </div>
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-sell">B√ÅN (SHORT)</span>
                        <div>
                            <strong>Chi·∫øn l∆∞·ª£c Ch·ªët l·ªùi/B√°n kh·ªëng:</strong>
                            <br>Khi RSI v∆∞·ª£t qu√° 70 (v√≠ d·ª• 75). ƒê·∫∑t l·ªánh B√ÅN khi RSI <strong>c·∫Øt xu·ªëng d∆∞·ªõi m·ªëc 70</strong>. ƒê√¢y l√† d·∫•u hi·ªáu phe mua ƒë√£ ƒëu·ªëi s·ª©c.
                        </div>
                    </div>
                </div>

                <div class="guide-section-title">4. Ph√¢n k·ª≥ (Divergence) - T√≠n hi·ªáu N√¢ng cao</div>
                <p>T√≠n hi·ªáu m·∫°nh nh·∫•t c·ªßa RSI l√† s·ª± ph√¢n k·ª≥:</p>
                <ul>
                    <li><strong>Ph√¢n k·ª≥ D∆∞∆°ng (ƒê·∫£o chi·ªÅu TƒÉng):</strong> Gi√° t·∫°o ƒë√°y m·ªõi TH·∫§P h∆°n ƒë√°y c≈©, nh∆∞ng RSI l·∫°i t·∫°o ƒë√°y m·ªõi CAO h∆°n ƒë√°y c≈©. Cho th·∫•y ƒë√† gi·∫£m ƒë√£ y·∫øu ƒëi ƒë√°ng k·ªÉ => Chu·∫©n b·ªã Mua.</li>
                    <li><strong>Ph√¢n k·ª≥ √Çm (ƒê·∫£o chi·ªÅu Gi·∫£m):</strong> Gi√° t·∫°o ƒë·ªânh m·ªõi CAO h∆°n ƒë·ªânh c≈©, nh∆∞ng RSI l·∫°i t·∫°o ƒë·ªânh m·ªõi TH·∫§P h∆°n ƒë·ªânh c≈©. Cho th·∫•y ƒë√† tƒÉng ch·ªâ l√† "·∫£o" v√† s·∫Øp s·∫≠p => Chu·∫©n b·ªã B√°n.</li>
                </ul>
            `,
            'MACD': `
                <h3>Ch·ªâ b√°o MACD</h3>
                <span class="guide-subtitle">(Moving Average Convergence Divergence) - T√°c gi·∫£: Gerald Appel</span>
                
                <div class="guide-section-title">1. Kh√°i ni·ªám c·ªët l√µi</div>
                <p>MACD l√† m·ªôt trong nh·ªØng ch·ªâ b√°o Follow-trend (theo xu h∆∞·ªõng) v√† Momentum (ƒë·ªông l∆∞·ª£ng) ph·ªï bi·∫øn nh·∫•t. N√≥ ƒë∆∞·ª£c c·∫•u t·∫°o t·ª´ 3 th√†nh ph·∫ßn ch√≠nh:</p>
                <ul>
                    <li><strong>ƒê∆∞·ªùng MACD (M√†u xanh):</strong> L√† hi·ªáu s·ªë gi·ªØa EMA 12 v√† EMA 26. Ph·∫£n ·ª©ng nhanh v·ªõi gi√°.</li>
                    <li><strong>ƒê∆∞·ªùng T√≠n hi·ªáu (Signal - M√†u ƒë·ªè):</strong> L√† ƒë∆∞·ªùng EMA 9 c·ªßa ch√≠nh ƒë∆∞·ªùng MACD. Ph·∫£n ·ª©ng ch·∫≠m h∆°n, d√πng ƒë·ªÉ x√°c nh·∫≠n t√≠n hi·ªáu.</li>
                    <li><strong>Histogram:</strong> Kho·∫£ng c√°ch gi·ªØa ƒë∆∞·ªùng MACD v√† ƒë∆∞·ªùng Signal.</li>
                </ul>

                <div class="guide-section-title">2. C√°ch ƒë·ªçc t√≠n hi·ªáu</div>
                <p>MACD ho·∫°t ƒë·ªông hi·ªáu qu·∫£ nh·∫•t trong c√°c th·ªã tr∆∞·ªùng c√≥ xu h∆∞·ªõng r√µ r√†ng. N√≥ gi√∫p x√°c ƒë·ªãnh s·ª± kh·ªüi ƒë·∫ßu v√† k·∫øt th√∫c c·ªßa m·ªôt con s√≥ng.</p>
                
                <div class="guide-section-title">3. Chi·∫øn l∆∞·ª£c Giao d·ªãch Chi ti·∫øt</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA</span>
                        <div>
                            <strong>Giao c·∫Øt V√†ng (Golden Cross):</strong>
                            <br>T√≠n hi·ªáu x·∫£y ra khi ƒë∆∞·ªùng MACD c·∫Øt t·ª´ d∆∞·ªõi l√™n tr√™n ƒë∆∞·ªùng Signal.
                            <br><em>M·∫πo:</em> T√≠n hi·ªáu s·∫Ω ƒë√°ng tin c·∫≠y h∆°n n·∫øu ƒëi·ªÉm giao c·∫Øt x·∫£y ra ·ªü d∆∞·ªõi ƒë∆∞·ªùng m·ªëc 0 (Zero Line). ƒêi·ªÅu n√†y b√°o hi·ªáu m·ªôt ƒë·ª£t ƒë·∫£o chi·ªÅu t·ª´ gi·∫£m sang tƒÉng m·∫°nh m·∫Ω.
                        </div>
                    </div>
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-sell">B√ÅN</span>
                        <div>
                            <strong>Giao c·∫Øt T·ª≠ th·∫ßn (Death Cross):</strong>
                            <br>T√≠n hi·ªáu x·∫£y ra khi ƒë∆∞·ªùng MACD c·∫Øt t·ª´ tr√™n xu·ªëng d∆∞·ªõi ƒë∆∞·ªùng Signal.
                            <br><em>M·∫πo:</em> N·∫øu giao c·∫Øt x·∫£y ra ·ªü tr√™n cao so v·ªõi ƒë∆∞·ªùng 0, ƒë√¢y l√† t√≠n hi·ªáu ch·ªët l·ªùi ho·∫∑c b√°n kh·ªëng r·∫•t m·∫°nh.
                        </div>
                    </div>
                </div>

                <div class="guide-section-title">4. V√≠ d·ª• Th·ª±c t·∫ø</div>
                <p>H√£y xem x√©t c·ªï phi·∫øu HPG trong giai ƒëo·∫°n uptrend. M·ªói khi gi√° ƒëi·ªÅu ch·ªânh nh·∫π, ƒë∆∞·ªùng MACD c√≥ th·ªÉ ti·∫øn s√°t ƒë∆∞·ªùng Signal nh∆∞ng kh√¥ng c·∫Øt xu·ªëng (ho·∫∑c c·∫Øt xu·ªëng nh·∫π r·ªìi v√≤ng l√™n ngay). Khi Histogram chuy·ªÉn t·ª´ ƒê·ªè sang Xanh tr·ªü l·∫°i, ƒë√≥ l√† ƒëi·ªÉm gia tƒÉng t·ª∑ tr·ªçng (nh·ªìi l·ªánh) tuy·ªát v·ªùi thay v√¨ mua m·ªõi.</p>
                <p><strong>L∆∞u √Ω quan tr·ªçng:</strong> MACD l√† ch·ªâ b√°o tr·ªÖ (lagging). ƒê·ª´ng s·ª≠ d·ª•ng n√≥ trong th·ªã tr∆∞·ªùng ƒëi ngang (Sideway) bi√™n ƒë·ªô h·∫πp v√¨ s·∫Ω g·∫∑p r·∫•t nhi·ªÅu t√≠n hi·ªáu nhi·ªÖu (c·∫Øt l√™n c·∫Øt xu·ªëng li√™n t·ª•c g√¢y l·ªó ph√≠ giao d·ªãch).</p>
            `,
            'Bollinger': `
                <h3>Bollinger Bands (D·∫£i Bollinger)</h3>
                <span class="guide-subtitle">C√¥ng c·ª• ƒëo l∆∞·ªùng bi·∫øn ƒë·ªông gi√° - T√°c gi·∫£: John Bollinger</span>
                
                <div class="guide-section-title">1. C·∫•u t·∫°o</div>
                <p>Bollinger Bands bao g·ªìm 3 ƒë∆∞·ªùng:</p>
                <ul>
                    <li><strong>D·∫£i gi·ªØa (Middle Band):</strong> L√† ƒë∆∞·ªùng SMA 20 (Trung b√¨nh ƒë·ªông ƒë∆°n gi·∫£n 20 phi√™n).</li>
                    <li><strong>D·∫£i tr√™n (Upper Band):</strong> SMA 20 + (2 x ƒê·ªô l·ªách chu·∫©n).</li>
                    <li><strong>D·∫£i d∆∞·ªõi (Lower Band):</strong> SMA 20 - (2 x ƒê·ªô l·ªách chu·∫©n).</li>
                </ul>
                <p>V·ªÅ l√Ω thuy·∫øt th·ªëng k√™, 95% bi·∫øn ƒë·ªông gi√° s·∫Ω n·∫±m g·ªçn trong l√≤ng hai d·∫£i n√†y. Do ƒë√≥, b·∫•t k·ª≥ khi n√†o gi√° tho√°t ra ngo√†i d·∫£i, n√≥ ƒë∆∞·ª£c xem l√† m·ªôt s·ª± ki·ªán "b·∫•t th∆∞·ªùng" v√† c√≥ xu h∆∞·ªõng b·ªã k√©o ng∆∞·ª£c tr·ªü l·∫°i b√™n trong.</p>

                <div class="guide-section-title">2. Chi·∫øn l∆∞·ª£c Giao d·ªãch Chi ti·∫øt</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA (B·∫Øt ƒë√°y)</span>
                        <div>
                            <strong>Chi·∫øn l∆∞·ª£c Ch·∫°m b·∫≠t:</strong>
                            <br>Khi gi√° gi·∫£m m·∫°nh v√† ch·∫°m (ho·∫∑c xuy√™n th·ªßng) D·∫£i D∆∞·ªõi. Ch·ªù ƒë·ª£i m·ªôt c√¢y n·∫øn xanh ƒë·∫£o chi·ªÅu (nh∆∞ Pinbar ho·∫∑c Engulfing) ƒë√≥ng c·ª≠a quay l·∫°i b√™n trong d·∫£i.
                            <br><strong>M·ª•c ti√™u:</strong> Ch·ªët l·ªùi t·∫°i D·∫£i Gi·ªØa (SMA 20) ho·∫∑c D·∫£i Tr√™n.
                        </div>
                    </div>
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA (Breakout)</span>
                        <div>
                            <strong>Chi·∫øn l∆∞·ª£c M·ªü n√∫t c·ªï chai (Squeeze):</strong>
                            <br>Khi hai d·∫£i Bollinger co th·∫Øt l·∫°i r·∫•t h·∫πp (th·ªÉ hi·ªán bi·∫øn ƒë·ªông th·∫•p, t√≠ch l≈©y). N·∫øu gi√° b·∫•t ng·ªù ph√° v·ª° D·∫£i Tr√™n v·ªõi kh·ªëi l∆∞·ª£ng l·ªõn, ƒë√¢y l√† kh·ªüi ƒë·∫ßu c·ªßa m·ªôt xu h∆∞·ªõng tƒÉng c·ª±c m·∫°nh. H√£y MUA ƒëu·ªïi ngay l·∫≠p t·ª©c.
                        </div>
                    </div>
                </div>

                <div class="guide-section-title">3. V√≠ d·ª• Kinh ƒëi·ªÉn</div>
                <p>Trong giai ƒëo·∫°n t√≠ch l≈©y c·ªßa SSI, Bollinger Bands co l·∫°i r·∫•t nh·ªè. ƒê·ªôt nhi√™n m·ªôt phi√™n gi√° tƒÉng tr·∫ßn, ƒë√¢m th·ªßng d·∫£i tr√™n (Upper Band Walk). Nhi·ªÅu ng∆∞·ªùi s·ª£ h√£i b√°n ra v√¨ nghƒ© l√† "Qu√° mua", nh∆∞ng th·ª±c t·∫ø ƒë√≥ l√† ƒëi·ªÉm mua ƒë·∫πp nh·∫•t. Gi√° sau ƒë√≥ "b√°m d·∫£i" ƒëi l√™n li√™n t·ª•c trong 2 th√°ng. Ch·ªâ b√°n khi gi√° quay ƒë·∫ßu c·∫Øt xu·ªëng th·ªßng l·∫°i v√†o trong d·∫£i.</p>
            `,
            'SMA': `
                <h3>ƒê∆∞·ªùng SMA (Simple Moving Average)</h3>
                <span class="guide-subtitle">ƒê∆∞·ªùng trung b√¨nh ƒë·ªông ƒë∆°n gi·∫£n</span>

                <div class="guide-section-title">1. √ù nghƒ©a</div>
                <p>SMA gi√∫p l√†m m∆∞·ª£t d·ªØ li·ªáu gi√° ƒë·ªÉ x√°c ƒë·ªãnh xu h∆∞·ªõng ch√≠nh. N√≥ ƒë√≥ng vai tr√≤ l√† c√°c ng∆∞·ª°ng H·ªó tr·ª£ v√† Kh√°ng c·ª± ƒë·ªông.</p>
                <ul>
                    <li><strong>SMA 20 (Ng·∫Øn h·∫°n):</strong> Ph·∫£n √°nh xu h∆∞·ªõng th√°ng. D√πng cho l∆∞·ªõt s√≥ng.</li>
                    <li><strong>SMA 50 (Trung h·∫°n):</strong> Ph·∫£n √°nh xu h∆∞·ªõng qu√Ω. R·∫•t quan tr·ªçng v·ªõi c√°c t·ªï ch·ª©c.</li>
                    <li><strong>SMA 200 (D√†i h·∫°n):</strong> "ƒê∆∞·ªùng sinh m·ªánh" c·ªßa c·ªï phi·∫øu. Gi√° tr√™n SMA 200 l√† Uptrend d√†i h·∫°n, d∆∞·ªõi l√† Downtrend.</li>
                </ul>

                <div class="guide-section-title">2. Chi·∫øn l∆∞·ª£c Giao d·ªãch</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA</span>
                        <div>
                            <strong>Golden Cross (Giao c·∫Øt v√†ng):</strong>
                            <br>Khi ƒë∆∞·ªùng SMA ng·∫Øn h·∫°n (v√≠ d·ª• SMA 50) c·∫Øt t·ª´ d∆∞·ªõi l√™n tr√™n ƒë∆∞·ªùng SMA d√†i h·∫°n (SMA 200). ƒê√¢y l√† t√≠n hi·ªáu MUA kinh ƒëi·ªÉn cho c√°c nh√† ƒë·∫ßu t∆∞ d√†i h·∫°n, b√°o hi·ªáu Uptrend c√≥ th·ªÉ k√©o d√†i h√†ng nƒÉm.
                        </div>
                    </div>
                     <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA (Pullback)</span>
                        <div>
                            Trong m·ªôt xu h∆∞·ªõng tƒÉng r√µ r√†ng (Gi√° > SMA 20 > SMA 50), m·ªói khi gi√° ƒëi·ªÅu ch·ªânh gi·∫£m ch·∫°m v·ªÅ ƒë∆∞·ªùng SMA 20 ho·∫∑c SMA 50 v√† b·∫≠t l√™n, ƒë√≥ l√† ƒëi·ªÉm mua gia tƒÉng an to√†n nh·∫•t.
                        </div>
                    </div>
                </div>

                <div class="guide-section-title">3. Quy t·∫Øc Qu·∫£n tr·ªã r·ªßi ro v·ªõi SMA</div>
                <p>Kh√¥ng bao gi·ªù mua c·ªï phi·∫øu khi gi√° ƒëang n·∫±m d∆∞·ªõi SMA 200 n·∫øu b·∫°n l√† nh√† ƒë·∫ßu t∆∞ an to√†n. ƒê∆∞·ªùng SMA 200 khi ƒë√≥ ƒë√≥ng vai tr√≤ l√† kh√°ng c·ª± r·∫•t m·∫°nh (c·ª© l√™n ch·∫°m l√† b·ªã b√°n xu·ªëng). H√£y ki√™n nh·∫´n ch·ªù gi√° v∆∞·ª£t h·∫≥n SMA 200 v√† test l·∫°i th√†nh c√¥ng (bi·∫øn kh√°ng c·ª± th√†nh h·ªó tr·ª£) r·ªìi m·ªõi gi·∫£i ng√¢n.</p>
            `,
            'Ichimoku': `
                <h3>M√¢y Ichimoku Kinko Hyo</h3>
                <span class="guide-subtitle">"C√°i nh√¨n tho√°ng qua v·ªÅ s·ª± c√¢n b·∫±ng c·ªßa ƒë·ªì th·ªã"</span>

                <div class="guide-section-title">1. H·ªá th·ªëng to√†n di·ªán</div>
                <p>Ichimoku kh√¥ng ch·ªâ l√† m·ªôt ch·ªâ b√°o, n√≥ l√† m·ªôt h·ªá giao d·ªãch ho√†n ch·ªânh. N√≥ cho bi·∫øt xu h∆∞·ªõng, h·ªó tr·ª£/kh√°ng c·ª±, v√† ƒë·ªông l∆∞·ª£ng c√πng m·ªôt l√∫c. Th√†nh ph·∫ßn quan tr·ªçng nh·∫•t l√† <strong>M√¢y Kumo</strong> (ƒë∆∞·ª£c t·∫°o b·ªüi Senkou Span A v√† Senkou Span B).</p>

                <div class="guide-section-title">2. C√°ch ƒë·ªçc M√¢y (Kumo)</div>
                <ul>
                    <li><strong>Gi√° n·∫±m TR√äN M√¢y:</strong> Xu h∆∞·ªõng TƒÉng (Uptrend). M√¢y ƒë√≥ng vai tr√≤ l√† H·ªó tr·ª£ m·∫°nh. Ch·ªâ canh MUA.</li>
                    <li><strong>Gi√° n·∫±m D∆Ø·ªöI M√¢y:</strong> Xu h∆∞·ªõng Gi·∫£m (Downtrend). M√¢y ƒë√≥ng vai tr√≤ l√† Kh√°ng c·ª± m·∫°nh. Ch·ªâ canh B√ÅN ho·∫∑c ƒë·ª©ng ngo√†i.</li>
                    <li><strong>Gi√° n·∫±m TRONG M√¢y:</strong> Th·ªã tr∆∞·ªùng kh√¥ng r√µ xu h∆∞·ªõng (Sideway). H·∫°n ch·∫ø giao d·ªãch v√¨ gi√° s·∫Ω gi·∫≠t r·∫•t m·∫°nh trong bi√™n ƒë·ªô m√¢y.</li>
                </ul>

                <div class="guide-section-title">3. Chi·∫øn l∆∞·ª£c Giao d·ªãch (Kumo Breakout)</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA</span>
                        <div>
                            <strong>T√≠n hi·ªáu TK Cross + M√¢y:</strong>
                            <br>1. Gi√° ph·∫£i n·∫±m tr√™n M√¢y.
                            <br>2. ƒê∆∞·ªùng Tenkan-sen (Chuy·ªÉn ƒë·ªïi - ƒê·ªè) c·∫Øt l√™n tr√™n ƒë∆∞·ªùng Kijun-sen (C∆° s·ªü - Xanh).
                            <br>3. Chikou Span (ƒê∆∞·ªùng tr·ªÖ) ph·∫£i n·∫±m tr√™n ƒë∆∞·ªùng gi√° c·ªßa 26 phi√™n tr∆∞·ªõc.
                            <br>=> ƒê√¢y l√† t√≠n hi·ªáu Mua x√°c su·∫•t th·∫Øng c·ª±c cao.
                        </div>
                    </div>
                </div>
                
                <div class="guide-section-title">4. V√≠ d·ª•</div>
                <p>Khi FPT v∆∞·ª£t qua ƒë√°m m√¢y d√†y m√†u ƒë·ªè (Kumo Breakout) v√† t√≠ch l≈©y tr√™n ƒë√≥, ƒë√°m m√¢y ƒë·ªïi m√†u x√°m/xanh. Sau ƒë√≥ gi√° FPT tƒÉng 30%. Nh√† giao d·ªãch Ichimoku s·∫Ω gi·ªØ l·ªánh cho ƒë·∫øn khi gi√° ƒë√≥ng c·ª≠a th·ªßng ƒë∆∞·ªùng Kijun-sen (ƒë∆∞·ªùng xanh) ho·∫∑c chui ng∆∞·ª£c v√†o trong m√¢y.</p>
            `,
            'Stochastic': `
                <h3>Stochastic Oscillator</h3>
                <span class="guide-subtitle">Ch·ªâ b√°o dao ƒë·ªông ng·∫´u nhi√™n - T√°c gi·∫£: George Lane</span>

                <div class="guide-section-title">1. Nguy√™n l√Ω</div>
                <p>Stochastic so s√°nh gi√° ƒë√≥ng c·ª≠a c·ª• th·ªÉ c·ªßa m·ªôt ch·ª©ng kho√°n v·ªõi ph·∫°m vi gi√° c·ªßa n√≥ trong m·ªôt kho·∫£ng th·ªùi gian nh·∫•t ƒë·ªãnh. N√≥ nh·∫°y h∆°n RSI v√† ph√π h·ª£p h∆°n trong th·ªã tr∆∞·ªùng ƒëi ngang (Sideway).</p>
                <p>Hai ƒë∆∞·ªùng c·∫•u t·∫°o: %K (ƒê∆∞·ªùng nhanh - Xanh) v√† %D (ƒê∆∞·ªùng ch·∫≠m - ƒê·ªè - l√† SMA c·ªßa %K).</p>

                <div class="guide-section-title">2. Chi·∫øn l∆∞·ª£c Giao d·ªãch</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA</span>
                        <div>
                            Ch·ªù Stochastic gi·∫£m xu·ªëng d∆∞·ªõi m·ª©c 20 (V√πng Qu√° B√°n).
                            <br>T√≠n hi·ªáu x√°c nh·∫≠n: ƒê∆∞·ªùng %K c·∫Øt l√™n tr√™n ƒë∆∞·ªùng %D.
                            <br><em>L∆∞u √Ω:</em> T√≠n hi·ªáu n√†y c·ª±c m·∫°nh n·∫øu x·∫£y ra t·∫°i v√πng H·ªó tr·ª£ c·ªßa gi√°.
                        </div>
                    </div>
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-sell">B√ÅN</span>
                        <div>
                            Ch·ªù Stochastic tƒÉng l√™n tr√™n m·ª©c 80 (V√πng Qu√° Mua).
                            <br>T√≠n hi·ªáu x√°c nh·∫≠n: ƒê∆∞·ªùng %K c·∫Øt xu·ªëng d∆∞·ªõi ƒë∆∞·ªùng %D.
                        </div>
                    </div>
                </div>

                <div class="guide-section-title">3. M·∫πo n√¢ng cao</div>
                <p>ƒê·ª´ng d√πng Stochastic ƒë·ªÉ b·∫Øt ƒë·ªânh ƒë√°y trong m·ªôt trend m·∫°nh. V√≠ d·ª• trong m·ªôt Uptrend m·∫°nh, Stochastic c√≥ th·ªÉ n·∫±m l√¨ ·ªü v√πng tr√™n 80 (Qu√° mua) h√†ng tu·∫ßn li·ªÅn. B√°n l√∫c ƒë√≥ l√† "m·∫•t h√†ng". Ch·ªâ s·ª≠ d·ª•ng chi·∫øn l∆∞·ª£c Qu√° Mua/Qu√° B√°n khi th·ªã tr∆∞·ªùng ƒëang ƒëi ngang (Swing Trading).</p>
            `,
            'ADX': `
                <h3>Ch·ªâ b√°o ADX (Average Directional Index)</h3>
                <span class="guide-subtitle">ƒêo l∆∞·ªùng S·ª©c m·∫°nh Xu h∆∞·ªõng</span>

                <div class="guide-section-title">1. Kh√°c bi·ªát quan tr·ªçng</div>
                <p>ADX kh√¥ng cho b·∫°n bi·∫øt gi√° s·∫Ω tƒÉng hay gi·∫£m. <strong>ADX ch·ªâ cho b·∫°n bi·∫øt xu h∆∞·ªõng hi·ªán t·∫°i c√≥ M·∫†NH hay kh√¥ng.</strong></p>
                <ul>
                    <li>ADX < 20: Xu h∆∞·ªõng y·∫øu, th·ªã tr∆∞·ªùng ƒëi ngang (Sideway). Kh√¥ng n√™n ƒë√°nh theo trend (Breakout s·∫Ω x·ªãt).</li>
                    <li>ADX > 25: B·∫Øt ƒë·∫ßu c√≥ xu h∆∞·ªõng.</li>
                    <li>ADX > 40: Xu h∆∞·ªõng c·ª±c m·∫°nh (m·∫°nh nh·∫•t).</li>
                </ul>
                <p>ƒê·ªÉ bi·∫øt h∆∞·ªõng (TƒÉng hay Gi·∫£m), ta ph·∫£i nh√¨n v√†o hai ƒë∆∞·ªùng ch·ªâ b√°o ƒëi k√®m: <strong>+DI (Xanh - L·ª±c mua)</strong> v√† <strong>-DI (ƒê·ªè - L·ª±c b√°n)</strong>.</p>

                <div class="guide-section-title">2. Chi·∫øn l∆∞·ª£c Giao d·ªãch</div>
                <div class="guide-strategy-box">
                    <div class="guide-strategy-item">
                        <span class="guide-tag tag-buy">MUA</span>
                        <div>
                            <strong>ƒêi·ªÅu ki·ªán 1:</strong> ƒê∆∞·ªùng +DI c·∫Øt l√™n tr√™n ƒë∆∞·ªùng -DI (Phe mua ki·ªÉm so√°t).
                            <br><strong>ƒêi·ªÅu ki·ªán 2:</strong> ADX > 25 v√† ƒëang h∆∞·ªõng l√™n (X√°c nh·∫≠n xu h∆∞·ªõng tƒÉng ƒëang m·∫°nh d·∫ßn).
                            <br>=> MUA v√† n·∫Øm gi·ªØ ch·∫∑t (Hold).
                        </div>
                    </div>
                     <div class="guide-strategy-item">
                        <span class="guide-tag tag-sell">B√ÅN/THO√ÅT</span>
                        <div>
                            Khi ADX ƒëang ·ªü m·ª©c r·∫•t cao (v√≠ d·ª• > 50) v√† b·∫Øt ƒë·∫ßu g·ª•c ƒë·∫ßu h∆∞·ªõng xu·ªëng. ƒêi·ªÅu ƒë√≥ kh√¥ng c√≥ nghƒ©a l√† gi√° s·∫Ω gi·∫£m ngay, m√† c√≥ nghƒ©a l√† xu h∆∞·ªõng tƒÉng ƒë√£ y·∫øu ƒëi, th·ªã tr∆∞·ªùng s·∫Øp chuy·ªÉn sang ƒëi ngang ho·∫∑c ƒëi·ªÅu ch·ªânh. ƒê√¢y l√† l√∫c ch·ªët l·ªùi d·∫ßn.
                        </div>
                    </div>
                </div>
            `
        };

        // OPEN FUNCTION
        window.openGuide = function (type) {
            const overlay = document.getElementById('guide-modal-overlay');
            const body = document.getElementById('guide-modal-body');

            if (GUIDE_DATA[type]) {
                body.innerHTML = GUIDE_DATA[type];
                overlay.classList.add('show');
                overlay.style.display = 'flex'; // Ensure flex is set
            }
        };

        // CLOSE FUNCTION
        window.closeGuideModal = function () {
            const overlay = document.getElementById('guide-modal-overlay');
            overlay.classList.remove('show');
            setTimeout(() => {
                if (!overlay.classList.contains('show')) overlay.style.display = 'none';
            }, 300); // Wait for transition
        };

        // Click outside to close
        document.getElementById('guide-modal-overlay').addEventListener('click', function (e) {
            if (e.target === this) {
                closeGuideModal();
            }
        });

    </script>

    <!-- Market Screener Module -->
    <script src="market_screener.js"></script>
    <script>
        // Market Scan Trigger
        async function startMarketScan() {
            const btn = document.getElementById('market-scan-btn');
            const progressContainer = document.getElementById('scan-progress-container');
            const progressFill = document.getElementById('scan-progress-fill');
            const progressStatus = document.getElementById('scan-progress-status');
            const progressPercent = document.getElementById('scan-progress-percent');
            const resultsContainer = document.getElementById('market-scan-results');

            // Disable button
            btn.disabled = true;
            btn.innerHTML = '‚è≥ ƒêang qu√©t...';

            // Show progress
            progressContainer.style.display = 'block';
            resultsContainer.style.display = 'none';

            try {
                const rankings = await MarketScreener.runFullScan((progress) => {
                    progressFill.style.width = progress.percent + '%';
                    progressPercent.textContent = progress.percent + '%';
                    progressStatus.textContent = `ƒêang qu√©t: ${progress.symbol} (${progress.current}/${progress.total}) - L·ªói: ${progress.errors}`;
                });

                // Render results
                MarketScreener.renderResults(rankings);

                // Hide progress
                progressContainer.style.display = 'none';

            } catch (e) {
                console.error('Scan error:', e);
                alert('C√≥ l·ªói x·∫£y ra khi qu√©t th·ªã tr∆∞·ªùng: ' + e.message);
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'üöÄ Ch·ªçn M√£ C·ªï Phi·∫øu ƒê·ªÉ ƒê·∫ßu T∆∞';
            }
        }
    </script>
</body>

</html>